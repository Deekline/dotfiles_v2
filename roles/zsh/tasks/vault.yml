---
- name: "ZSH | Get private variables from Vault"
  ansible.builtin.command: "op read '{{ secret.vault_path }}'"
  register: op_secret
  changed_when: false
  no_log: true

- name: "ZSH | Set zsh_private"
  ansible.builtin.set_fact:
    zsh_private: "{{ zsh_private | combine({ item.key: item.value }) }}"
  no_log: true
  with_items:
    - key: "{{ secret.name }}"
      value: "{{ op_secret.stdout }}"
